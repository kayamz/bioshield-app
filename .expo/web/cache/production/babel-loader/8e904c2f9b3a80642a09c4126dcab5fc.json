{"ast":null,"code":"import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import _regeneratorRuntime from\"@babel/runtime/regenerator\";import{EventEmitter,UnavailabilityError}from'expo-modules-core';import Platform from\"react-native-web/dist/exports/Platform\";import{v4 as uuidv4}from'uuid';import ExponentFileSystem from\"./ExponentFileSystem\";import{EncodingType,FileSystemSessionType,FileSystemUploadType}from\"./FileSystem.types\";if(!ExponentFileSystem){console.warn(\"No native ExponentFileSystem module found, are you sure the expo-file-system's module is linked properly?\");}var _unused=new EventEmitter(ExponentFileSystem);export{EncodingType,FileSystemSessionType,FileSystemUploadType};function normalizeEndingSlash(p){if(p!=null){return p.replace(/\\/*$/,'')+'/';}return null;}export var documentDirectory=normalizeEndingSlash(ExponentFileSystem.documentDirectory);export var cacheDirectory=normalizeEndingSlash(ExponentFileSystem.cacheDirectory);var bundledAssets=ExponentFileSystem.bundledAssets,bundleDirectory=ExponentFileSystem.bundleDirectory;export{bundledAssets,bundleDirectory};export function getInfoAsync(fileUri){var options,_args=arguments;return _regeneratorRuntime.async(function getInfoAsync$(_context){while(1){switch(_context.prev=_context.next){case 0:options=_args.length>1&&_args[1]!==undefined?_args[1]:{};if(ExponentFileSystem.getInfoAsync){_context.next=3;break;}throw new UnavailabilityError('expo-file-system','getInfoAsync');case 3:_context.next=5;return _regeneratorRuntime.awrap(ExponentFileSystem.getInfoAsync(fileUri,options));case 5:return _context.abrupt(\"return\",_context.sent);case 6:case\"end\":return _context.stop();}}},null,null,null,Promise);}export function readAsStringAsync(fileUri,options){return _regeneratorRuntime.async(function readAsStringAsync$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(ExponentFileSystem.readAsStringAsync){_context2.next=2;break;}throw new UnavailabilityError('expo-file-system','readAsStringAsync');case 2:_context2.next=4;return _regeneratorRuntime.awrap(ExponentFileSystem.readAsStringAsync(fileUri,options||{}));case 4:return _context2.abrupt(\"return\",_context2.sent);case 5:case\"end\":return _context2.stop();}}},null,null,null,Promise);}export function getContentUriAsync(fileUri){return _regeneratorRuntime.async(function getContentUriAsync$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(Platform.OS==='android')){_context3.next=8;break;}if(ExponentFileSystem.getContentUriAsync){_context3.next=3;break;}throw new UnavailabilityError('expo-file-system','getContentUriAsync');case 3:_context3.next=5;return _regeneratorRuntime.awrap(ExponentFileSystem.getContentUriAsync(fileUri));case 5:return _context3.abrupt(\"return\",_context3.sent);case 8:return _context3.abrupt(\"return\",new Promise(function(resolve,reject){resolve(fileUri);}));case 9:case\"end\":return _context3.stop();}}},null,null,null,Promise);}export function writeAsStringAsync(fileUri,contents){var options,_args4=arguments;return _regeneratorRuntime.async(function writeAsStringAsync$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:options=_args4.length>2&&_args4[2]!==undefined?_args4[2]:{};if(ExponentFileSystem.writeAsStringAsync){_context4.next=3;break;}throw new UnavailabilityError('expo-file-system','writeAsStringAsync');case 3:_context4.next=5;return _regeneratorRuntime.awrap(ExponentFileSystem.writeAsStringAsync(fileUri,contents,options));case 5:return _context4.abrupt(\"return\",_context4.sent);case 6:case\"end\":return _context4.stop();}}},null,null,null,Promise);}export function deleteAsync(fileUri){var options,_args5=arguments;return _regeneratorRuntime.async(function deleteAsync$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:options=_args5.length>1&&_args5[1]!==undefined?_args5[1]:{};if(ExponentFileSystem.deleteAsync){_context5.next=3;break;}throw new UnavailabilityError('expo-file-system','deleteAsync');case 3:_context5.next=5;return _regeneratorRuntime.awrap(ExponentFileSystem.deleteAsync(fileUri,options));case 5:return _context5.abrupt(\"return\",_context5.sent);case 6:case\"end\":return _context5.stop();}}},null,null,null,Promise);}export function deleteLegacyDocumentDirectoryAndroid(){var legacyDocumentDirectory;return _regeneratorRuntime.async(function deleteLegacyDocumentDirectoryAndroid$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(Platform.OS!=='android'||documentDirectory==null)){_context6.next=2;break;}return _context6.abrupt(\"return\");case 2:legacyDocumentDirectory=documentDirectory+\"ExperienceData/\";_context6.next=5;return _regeneratorRuntime.awrap(deleteAsync(legacyDocumentDirectory,{idempotent:true}));case 5:return _context6.abrupt(\"return\",_context6.sent);case 6:case\"end\":return _context6.stop();}}},null,null,null,Promise);}export function moveAsync(options){return _regeneratorRuntime.async(function moveAsync$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(ExponentFileSystem.moveAsync){_context7.next=2;break;}throw new UnavailabilityError('expo-file-system','moveAsync');case 2:_context7.next=4;return _regeneratorRuntime.awrap(ExponentFileSystem.moveAsync(options));case 4:return _context7.abrupt(\"return\",_context7.sent);case 5:case\"end\":return _context7.stop();}}},null,null,null,Promise);}export function copyAsync(options){return _regeneratorRuntime.async(function copyAsync$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(ExponentFileSystem.copyAsync){_context8.next=2;break;}throw new UnavailabilityError('expo-file-system','copyAsync');case 2:_context8.next=4;return _regeneratorRuntime.awrap(ExponentFileSystem.copyAsync(options));case 4:return _context8.abrupt(\"return\",_context8.sent);case 5:case\"end\":return _context8.stop();}}},null,null,null,Promise);}export function makeDirectoryAsync(fileUri){var options,_args9=arguments;return _regeneratorRuntime.async(function makeDirectoryAsync$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:options=_args9.length>1&&_args9[1]!==undefined?_args9[1]:{};if(ExponentFileSystem.makeDirectoryAsync){_context9.next=3;break;}throw new UnavailabilityError('expo-file-system','makeDirectoryAsync');case 3:_context9.next=5;return _regeneratorRuntime.awrap(ExponentFileSystem.makeDirectoryAsync(fileUri,options));case 5:return _context9.abrupt(\"return\",_context9.sent);case 6:case\"end\":return _context9.stop();}}},null,null,null,Promise);}export function readDirectoryAsync(fileUri){return _regeneratorRuntime.async(function readDirectoryAsync$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(ExponentFileSystem.readDirectoryAsync){_context10.next=2;break;}throw new UnavailabilityError('expo-file-system','readDirectoryAsync');case 2:_context10.next=4;return _regeneratorRuntime.awrap(ExponentFileSystem.readDirectoryAsync(fileUri,{}));case 4:return _context10.abrupt(\"return\",_context10.sent);case 5:case\"end\":return _context10.stop();}}},null,null,null,Promise);}export function getFreeDiskStorageAsync(){return _regeneratorRuntime.async(function getFreeDiskStorageAsync$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:if(ExponentFileSystem.getFreeDiskStorageAsync){_context11.next=2;break;}throw new UnavailabilityError('expo-file-system','getFreeDiskStorageAsync');case 2:_context11.next=4;return _regeneratorRuntime.awrap(ExponentFileSystem.getFreeDiskStorageAsync());case 4:return _context11.abrupt(\"return\",_context11.sent);case 5:case\"end\":return _context11.stop();}}},null,null,null,Promise);}export function getTotalDiskCapacityAsync(){return _regeneratorRuntime.async(function getTotalDiskCapacityAsync$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:if(ExponentFileSystem.getTotalDiskCapacityAsync){_context12.next=2;break;}throw new UnavailabilityError('expo-file-system','getTotalDiskCapacityAsync');case 2:_context12.next=4;return _regeneratorRuntime.awrap(ExponentFileSystem.getTotalDiskCapacityAsync());case 4:return _context12.abrupt(\"return\",_context12.sent);case 5:case\"end\":return _context12.stop();}}},null,null,null,Promise);}export function downloadAsync(uri,fileUri){var options,_args13=arguments;return _regeneratorRuntime.async(function downloadAsync$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:options=_args13.length>2&&_args13[2]!==undefined?_args13[2]:{};if(ExponentFileSystem.downloadAsync){_context13.next=3;break;}throw new UnavailabilityError('expo-file-system','downloadAsync');case 3:_context13.next=5;return _regeneratorRuntime.awrap(ExponentFileSystem.downloadAsync(uri,fileUri,_objectSpread({sessionType:FileSystemSessionType.BACKGROUND},options)));case 5:return _context13.abrupt(\"return\",_context13.sent);case 6:case\"end\":return _context13.stop();}}},null,null,null,Promise);}export function uploadAsync(url,fileUri){var options,_args14=arguments;return _regeneratorRuntime.async(function uploadAsync$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:options=_args14.length>2&&_args14[2]!==undefined?_args14[2]:{};if(ExponentFileSystem.uploadAsync){_context14.next=3;break;}throw new UnavailabilityError('expo-file-system','uploadAsync');case 3:_context14.next=5;return _regeneratorRuntime.awrap(ExponentFileSystem.uploadAsync(url,fileUri,_objectSpread(_objectSpread({sessionType:FileSystemSessionType.BACKGROUND,uploadType:FileSystemUploadType.BINARY_CONTENT},options),{},{httpMethod:(options.httpMethod||'POST').toUpperCase()})));case 5:return _context14.abrupt(\"return\",_context14.sent);case 6:case\"end\":return _context14.stop();}}},null,null,null,Promise);}export function createDownloadResumable(uri,fileUri,options,callback,resumeData){return new DownloadResumable(uri,fileUri,options,callback,resumeData);}export function createUploadTask(url,fileUri,options,callback){return new UploadTask(url,fileUri,options,callback);}export var FileSystemCancellableNetworkTask=function(){function FileSystemCancellableNetworkTask(){_classCallCheck(this,FileSystemCancellableNetworkTask);this._uuid=uuidv4();this.taskWasCanceled=false;this.emitter=new EventEmitter(ExponentFileSystem);}_createClass(FileSystemCancellableNetworkTask,[{key:\"cancelAsync\",value:function cancelAsync(){return _regeneratorRuntime.async(function cancelAsync$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:if(ExponentFileSystem.networkTaskCancelAsync){_context15.next=2;break;}throw new UnavailabilityError('expo-file-system','networkTaskCancelAsync');case 2:this.removeSubscription();this.taskWasCanceled=true;_context15.next=6;return _regeneratorRuntime.awrap(ExponentFileSystem.networkTaskCancelAsync(this.uuid));case 6:return _context15.abrupt(\"return\",_context15.sent);case 7:case\"end\":return _context15.stop();}}},null,this,null,Promise);}},{key:\"isTaskCancelled\",value:function isTaskCancelled(){if(this.taskWasCanceled){console.warn('This task was already canceled.');return true;}return false;}},{key:\"uuid\",get:function get(){return this._uuid;}},{key:\"addSubscription\",value:function addSubscription(){var _this=this;if(this.subscription){return;}this.subscription=this.emitter.addListener(this.getEventName(),function(event){if(event.uuid===_this.uuid){var callback=_this.getCallback();if(callback){callback(event.data);}}});}},{key:\"removeSubscription\",value:function removeSubscription(){if(!this.subscription){return;}this.emitter.removeSubscription(this.subscription);this.subscription=null;}}]);return FileSystemCancellableNetworkTask;}();export var UploadTask=function(_FileSystemCancellabl){_inherits(UploadTask,_FileSystemCancellabl);var _super=_createSuper(UploadTask);function UploadTask(url,fileUri,options,callback){var _options$httpMethod;var _this2;_classCallCheck(this,UploadTask);_this2=_super.call(this);_this2.url=url;_this2.fileUri=fileUri;_this2.callback=callback;var httpMethod=(options==null?void 0:(_options$httpMethod=options.httpMethod)==null?void 0:_options$httpMethod.toUpperCase())||'POST';_this2.options=_objectSpread(_objectSpread({sessionType:FileSystemSessionType.BACKGROUND,uploadType:FileSystemUploadType.BINARY_CONTENT},options),{},{httpMethod:httpMethod});return _this2;}_createClass(UploadTask,[{key:\"getEventName\",value:function getEventName(){return'expo-file-system.uploadProgress';}},{key:\"getCallback\",value:function getCallback(){return this.callback;}},{key:\"uploadAsync\",value:function uploadAsync(){var result;return _regeneratorRuntime.async(function uploadAsync$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:if(ExponentFileSystem.uploadTaskStartAsync){_context16.next=2;break;}throw new UnavailabilityError('expo-file-system','uploadTaskStartAsync');case 2:if(!this.isTaskCancelled()){_context16.next=4;break;}return _context16.abrupt(\"return\");case 4:this.addSubscription();_context16.next=7;return _regeneratorRuntime.awrap(ExponentFileSystem.uploadTaskStartAsync(this.url,this.fileUri,this.uuid,this.options));case 7:result=_context16.sent;this.removeSubscription();return _context16.abrupt(\"return\",result);case 10:case\"end\":return _context16.stop();}}},null,this,null,Promise);}}]);return UploadTask;}(FileSystemCancellableNetworkTask);export var DownloadResumable=function(_FileSystemCancellabl2){_inherits(DownloadResumable,_FileSystemCancellabl2);var _super2=_createSuper(DownloadResumable);function DownloadResumable(url,_fileUri){var _this3;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var callback=arguments.length>3?arguments[3]:undefined;var resumeData=arguments.length>4?arguments[4]:undefined;_classCallCheck(this,DownloadResumable);_this3=_super2.call(this);_this3.url=url;_this3._fileUri=_fileUri;_this3.options=options;_this3.callback=callback;_this3.resumeData=resumeData;return _this3;}_createClass(DownloadResumable,[{key:\"fileUri\",get:function get(){return this._fileUri;}},{key:\"getEventName\",value:function getEventName(){return'expo-file-system.downloadProgress';}},{key:\"getCallback\",value:function getCallback(){return this.callback;}},{key:\"downloadAsync\",value:function downloadAsync(){return _regeneratorRuntime.async(function downloadAsync$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:if(ExponentFileSystem.downloadResumableStartAsync){_context17.next=2;break;}throw new UnavailabilityError('expo-file-system','downloadResumableStartAsync');case 2:if(!this.isTaskCancelled()){_context17.next=4;break;}return _context17.abrupt(\"return\");case 4:this.addSubscription();_context17.next=7;return _regeneratorRuntime.awrap(ExponentFileSystem.downloadResumableStartAsync(this.url,this._fileUri,this.uuid,this.options,this.resumeData));case 7:return _context17.abrupt(\"return\",_context17.sent);case 8:case\"end\":return _context17.stop();}}},null,this,null,Promise);}},{key:\"pauseAsync\",value:function pauseAsync(){var pauseResult;return _regeneratorRuntime.async(function pauseAsync$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:if(ExponentFileSystem.downloadResumablePauseAsync){_context18.next=2;break;}throw new UnavailabilityError('expo-file-system','downloadResumablePauseAsync');case 2:if(!this.isTaskCancelled()){_context18.next=4;break;}return _context18.abrupt(\"return\",{fileUri:this._fileUri,options:this.options,url:this.url});case 4:_context18.next=6;return _regeneratorRuntime.awrap(ExponentFileSystem.downloadResumablePauseAsync(this.uuid));case 6:pauseResult=_context18.sent;this.removeSubscription();if(!pauseResult){_context18.next=13;break;}this.resumeData=pauseResult.resumeData;return _context18.abrupt(\"return\",this.savable());case 13:throw new Error('Unable to generate a savable pause state');case 14:case\"end\":return _context18.stop();}}},null,this,null,Promise);}},{key:\"resumeAsync\",value:function resumeAsync(){return _regeneratorRuntime.async(function resumeAsync$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:if(ExponentFileSystem.downloadResumableStartAsync){_context19.next=2;break;}throw new UnavailabilityError('expo-file-system','downloadResumableStartAsync');case 2:if(!this.isTaskCancelled()){_context19.next=4;break;}return _context19.abrupt(\"return\");case 4:this.addSubscription();_context19.next=7;return _regeneratorRuntime.awrap(ExponentFileSystem.downloadResumableStartAsync(this.url,this.fileUri,this.uuid,this.options,this.resumeData));case 7:return _context19.abrupt(\"return\",_context19.sent);case 8:case\"end\":return _context19.stop();}}},null,this,null,Promise);}},{key:\"savable\",value:function savable(){return{url:this.url,fileUri:this.fileUri,options:this.options,resumeData:this.resumeData};}}]);return DownloadResumable;}(FileSystemCancellableNetworkTask);var baseReadAsStringAsync=readAsStringAsync;var baseWriteAsStringAsync=writeAsStringAsync;var baseDeleteAsync=deleteAsync;var baseMoveAsync=moveAsync;var baseCopyAsync=copyAsync;export var StorageAccessFramework;(function(StorageAccessFramework){function getUriForDirectoryInRoot(folderName){return\"content://com.android.externalstorage.documents/tree/primary:\"+folderName+\"/document/primary:\"+folderName;}StorageAccessFramework.getUriForDirectoryInRoot=getUriForDirectoryInRoot;function requestDirectoryPermissionsAsync(){var initialFileUrl,_args20=arguments;return _regeneratorRuntime.async(function requestDirectoryPermissionsAsync$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:initialFileUrl=_args20.length>0&&_args20[0]!==undefined?_args20[0]:null;if(ExponentFileSystem.requestDirectoryPermissionsAsync){_context20.next=3;break;}throw new UnavailabilityError('expo-file-system','StorageAccessFramework.requestDirectoryPermissionsAsync');case 3:_context20.next=5;return _regeneratorRuntime.awrap(ExponentFileSystem.requestDirectoryPermissionsAsync(initialFileUrl));case 5:return _context20.abrupt(\"return\",_context20.sent);case 6:case\"end\":return _context20.stop();}}},null,null,null,Promise);}StorageAccessFramework.requestDirectoryPermissionsAsync=requestDirectoryPermissionsAsync;function readDirectoryAsync(dirUri){return _regeneratorRuntime.async(function readDirectoryAsync$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:if(ExponentFileSystem.readSAFDirectoryAsync){_context21.next=2;break;}throw new UnavailabilityError('expo-file-system','StorageAccessFramework.readDirectoryAsync');case 2:_context21.next=4;return _regeneratorRuntime.awrap(ExponentFileSystem.readSAFDirectoryAsync(dirUri,{}));case 4:return _context21.abrupt(\"return\",_context21.sent);case 5:case\"end\":return _context21.stop();}}},null,null,null,Promise);}StorageAccessFramework.readDirectoryAsync=readDirectoryAsync;function makeDirectoryAsync(parentUri,dirName){return _regeneratorRuntime.async(function makeDirectoryAsync$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:if(ExponentFileSystem.makeSAFDirectoryAsync){_context22.next=2;break;}throw new UnavailabilityError('expo-file-system','StorageAccessFramework.makeDirectoryAsync');case 2:_context22.next=4;return _regeneratorRuntime.awrap(ExponentFileSystem.makeSAFDirectoryAsync(parentUri,dirName));case 4:return _context22.abrupt(\"return\",_context22.sent);case 5:case\"end\":return _context22.stop();}}},null,null,null,Promise);}StorageAccessFramework.makeDirectoryAsync=makeDirectoryAsync;function createFileAsync(parentUri,fileName,mimeType){return _regeneratorRuntime.async(function createFileAsync$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:if(ExponentFileSystem.createSAFFileAsync){_context23.next=2;break;}throw new UnavailabilityError('expo-file-system','StorageAccessFramework.createFileAsync');case 2:_context23.next=4;return _regeneratorRuntime.awrap(ExponentFileSystem.createSAFFileAsync(parentUri,fileName,mimeType));case 4:return _context23.abrupt(\"return\",_context23.sent);case 5:case\"end\":return _context23.stop();}}},null,null,null,Promise);}StorageAccessFramework.createFileAsync=createFileAsync;StorageAccessFramework.writeAsStringAsync=baseWriteAsStringAsync;StorageAccessFramework.readAsStringAsync=baseReadAsStringAsync;StorageAccessFramework.deleteAsync=baseDeleteAsync;StorageAccessFramework.moveAsync=baseMoveAsync;StorageAccessFramework.copyAsync=baseCopyAsync;})(StorageAccessFramework||(StorageAccessFramework={}));","map":{"version":3,"sources":["../src/FileSystem.ts"],"names":[],"mappings":"k6DAAA,OAAS,YAAT,CAAqC,mBAArC,KAAgE,mBAAhE,C,6DAEA,OAAS,EAAE,GAAI,CAAA,MAAf,KAA6B,MAA7B,CAEA,MAAO,CAAA,kBAAP,4BACA,OAQE,YARF,CAaE,qBAbF,CAgBE,oBAhBF,0BAsBA,GAAI,CAAC,kBAAL,CAAyB,CACvB,OAAO,CAAC,IAAR,CACE,2GADF,EAGD,CAED,GAAM,CAAA,OAAO,CAAG,GAAI,CAAA,YAAJ,CAAiB,kBAAjB,CAAhB,CAEA,OAME,YANF,CAWE,qBAXF,CAcE,oBAdF,EAoBA,QAAS,CAAA,oBAAT,CAA8B,CAA9B,CAA8C,CAC5C,GAAI,CAAC,EAAI,IAAT,CAAe,CACb,MAAO,CAAA,CAAC,CAAC,OAAF,CAAU,MAAV,CAAkB,EAAlB,EAAwB,GAA/B,CACD,CACD,MAAO,KAAP,CACD,CAED,MAAO,IAAM,CAAA,iBAAiB,CAAG,oBAAoB,CAAC,kBAAkB,CAAC,iBAApB,CAA9C,CACP,MAAO,IAAM,CAAA,cAAc,CAAG,oBAAoB,CAAC,kBAAkB,CAAC,cAApB,CAA3C,CAEA,GAAQ,CAAA,aAAR,CAA2C,kBAA3C,CAAQ,aAAR,CAAuB,eAAvB,CAA2C,kBAA3C,CAAuB,eAAvB,C,sCAEP,MAAO,SAAe,CAAA,YAAf,CACL,OADK,oJAEL,OAFK,+CAEwC,EAFxC,IAIA,kBAAkB,CAAC,YAJnB,8BAKG,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,cAA5C,CALH,yDAOQ,kBAAkB,CAAC,YAAnB,CAAgC,OAAhC,CAAyC,OAAzC,CAPR,6HAUP,MAAO,SAAe,CAAA,iBAAf,CACL,OADK,CAEL,OAFK,mIAIA,kBAAkB,CAAC,iBAJnB,+BAKG,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,mBAA5C,CALH,0DAOQ,kBAAkB,CAAC,iBAAnB,CAAqC,OAArC,CAA8C,OAAO,EAAI,EAAzD,CAPR,gIAUP,MAAO,SAAe,CAAA,kBAAf,CAAkC,OAAlC,sIACD,QAAQ,CAAC,EAAT,GAAgB,SADf,8BAEE,kBAAkB,CAAC,kBAFrB,+BAGK,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,oBAA5C,CAHL,0DAKU,kBAAkB,CAAC,kBAAnB,CAAsC,OAAtC,CALV,kGAOI,GAAI,CAAA,OAAJ,CAAY,SAAU,OAAV,CAAmB,MAAnB,CAAyB,CAC1C,OAAO,CAAC,OAAD,CAAP,CACD,CAFM,CAPJ,wEAaP,MAAO,SAAe,CAAA,kBAAf,CACL,OADK,CAEL,QAFK,8JAGL,OAHK,kDAGqB,EAHrB,IAKA,kBAAkB,CAAC,kBALnB,+BAMG,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,oBAA5C,CANH,0DAQQ,kBAAkB,CAAC,kBAAnB,CAAsC,OAAtC,CAA+C,QAA/C,CAAyD,OAAzD,CARR,gIAWP,MAAO,SAAe,CAAA,WAAf,CACL,OADK,uJAEL,OAFK,kDAE+B,EAF/B,IAIA,kBAAkB,CAAC,WAJnB,+BAKG,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,aAA5C,CALH,0DAOQ,kBAAkB,CAAC,WAAnB,CAA+B,OAA/B,CAAwC,OAAxC,CAPR,gIAUP,MAAO,SAAe,CAAA,oCAAf,qLACD,QAAQ,CAAC,EAAT,GAAgB,SAAhB,EAA6B,iBAAiB,EAAI,IADjD,oEAIC,uBAJD,CAI8B,iBAJ9B,qEAKQ,WAAW,CAAC,uBAAD,CAA0B,CAAE,UAAU,CAAE,IAAd,CAA1B,CALnB,gIAQP,MAAO,SAAe,CAAA,SAAf,CAAyB,OAAzB,2HACA,kBAAkB,CAAC,SADnB,+BAEG,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,WAA5C,CAFH,0DAIQ,kBAAkB,CAAC,SAAnB,CAA6B,OAA7B,CAJR,gIAOP,MAAO,SAAe,CAAA,SAAf,CAAyB,OAAzB,2HACA,kBAAkB,CAAC,SADnB,+BAEG,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,WAA5C,CAFH,0DAIQ,kBAAkB,CAAC,SAAnB,CAA6B,OAA7B,CAJR,gIAOP,MAAO,SAAe,CAAA,kBAAf,CACL,OADK,8JAEL,OAFK,kDAEkC,EAFlC,IAIA,kBAAkB,CAAC,kBAJnB,+BAKG,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,oBAA5C,CALH,0DAOQ,kBAAkB,CAAC,kBAAnB,CAAsC,OAAtC,CAA+C,OAA/C,CAPR,gIAUP,MAAO,SAAe,CAAA,kBAAf,CAAkC,OAAlC,uIACA,kBAAkB,CAAC,kBADnB,gCAEG,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,oBAA5C,CAFH,2DAIQ,kBAAkB,CAAC,kBAAnB,CAAsC,OAAtC,CAA+C,EAA/C,CAJR,mIAOP,MAAO,SAAe,CAAA,uBAAf,6IACA,kBAAkB,CAAC,uBADnB,gCAEG,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,yBAA5C,CAFH,2DAIQ,kBAAkB,CAAC,uBAAnB,EAJR,mIAOP,MAAO,SAAe,CAAA,yBAAf,+IACA,kBAAkB,CAAC,yBADnB,gCAEG,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,2BAA5C,CAFH,2DAIQ,kBAAkB,CAAC,yBAAnB,EAJR,mIAOP,MAAO,SAAe,CAAA,aAAf,CACL,GADK,CAEL,OAFK,6JAGL,OAHK,qDAGsB,EAHtB,IAKA,kBAAkB,CAAC,aALnB,gCAMG,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,eAA5C,CANH,2DASQ,kBAAkB,CAAC,aAAnB,CAAiC,GAAjC,CAAsC,OAAtC,gBACX,WAAW,CAAE,qBAAqB,CAAC,UADxB,EAER,OAFQ,EATR,mIAeP,MAAO,SAAe,CAAA,WAAf,CACL,GADK,CAEL,OAFK,2JAGL,OAHK,qDAG8B,EAH9B,IAKA,kBAAkB,CAAC,WALnB,gCAMG,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,aAA5C,CANH,2DASQ,kBAAkB,CAAC,WAAnB,CAA+B,GAA/B,CAAoC,OAApC,8BACX,WAAW,CAAE,qBAAqB,CAAC,UADxB,CAEX,UAAU,CAAE,oBAAoB,CAAC,cAFtB,EAGR,OAHQ,MAIX,UAAU,CAAE,CAAC,OAAO,CAAC,UAAR,EAAsB,MAAvB,EAA+B,WAA/B,EAJD,GATR,mIAiBP,MAAM,SAAU,CAAA,uBAAV,CACJ,GADI,CAEJ,OAFI,CAGJ,OAHI,CAIJ,QAJI,CAKJ,UALI,CAKe,CAEnB,MAAO,IAAI,CAAA,iBAAJ,CAAsB,GAAtB,CAA2B,OAA3B,CAAoC,OAApC,CAA6C,QAA7C,CAAuD,UAAvD,CAAP,CACD,CAED,MAAM,SAAU,CAAA,gBAAV,CACJ,GADI,CAEJ,OAFI,CAGJ,OAHI,CAIJ,QAJI,CAIgE,CAEpE,MAAO,IAAI,CAAA,UAAJ,CAAe,GAAf,CAAoB,OAApB,CAA6B,OAA7B,CAAsC,QAAtC,CAAP,CACD,CAED,UAAsB,CAAA,gCAAtB,oHAGU,KAHV,CAGkB,MAAM,EAHxB,MAIY,eAJZ,CAI8B,KAJ9B,MAKU,OALV,CAKoB,GAAI,CAAA,YAAJ,CAAiB,kBAAjB,CALpB,0EAQS,qJACA,kBAAkB,CAAC,sBADnB,gCAEG,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,wBAA5C,CAFH,QAKL,KAAK,kBAAL,GACA,KAAK,eAAL,CAAuB,IAAvB,CANK,mDAOQ,kBAAkB,CAAC,sBAAnB,CAA0C,KAAK,IAA/C,CAPR,mIART,+BAkBY,0BAAe,CACvB,GAAI,KAAK,eAAT,CAA0B,CACxB,OAAO,CAAC,IAAR,CAAa,iCAAb,EACA,MAAO,KAAP,CACD,CAED,MAAO,MAAP,CACD,CAzBH,kBA2BE,cAAkB,CAChB,MAAO,MAAK,KAAZ,CACD,CA7BH,+BAmCY,0BAAe,gBACvB,GAAI,KAAK,YAAT,CAAuB,CACrB,OACD,CAED,KAAK,YAAL,CAAoB,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,YAAL,EAAzB,CAA8C,SAAC,KAAD,CAA4B,CAC5F,GAAI,KAAK,CAAC,IAAN,GAAe,KAAI,CAAC,IAAxB,CAA8B,CAC5B,GAAM,CAAA,QAAQ,CAAG,KAAI,CAAC,WAAL,EAAjB,CACA,GAAI,QAAJ,CAAc,CACZ,QAAQ,CAAC,KAAK,CAAC,IAAP,CAAR,CACD,CACF,CACF,CAPmB,CAApB,CAQD,CAhDH,kCAkDY,6BAAkB,CAC1B,GAAI,CAAC,KAAK,YAAV,CAAwB,CACtB,OACD,CACD,KAAK,OAAL,CAAa,kBAAb,CAAgC,KAAK,YAArC,EACA,KAAK,YAAL,CAAoB,IAApB,CACD,CAxDH,gDA2DA,UAAa,CAAA,UAAb,iHAGE,oBACU,GADV,CAEU,OAFV,CAGE,OAHF,CAIU,QAJV,CAI8E,qEAE5E,yBALQ,OAAA,GAAA,CAAA,GAAA,CACA,OAAA,OAAA,CAAA,OAAA,CAEA,OAAA,QAAA,CAAA,QAAA,CAIR,GAAM,CAAA,UAAU,CAAI,CAAA,OAAO,MAAP,6BAAA,OAAO,CAAE,UAAT,mCAAqB,WAArB,KAClB,MADF,CAGA,OAAK,OAAL,8BACE,WAAW,CAAE,qBAAqB,CAAC,UADrC,CAEE,UAAU,CAAE,oBAAoB,CAAC,cAFnC,EAGK,OAHL,MAIE,UAAU,CAAV,UAJF,GAP4E,cAa7E,CApBH,mDAsBY,uBAAY,CACpB,MAAO,iCAAP,CACD,CAxBH,2BAyBY,sBAAW,CACnB,MAAO,MAAK,QAAZ,CACD,CA3BH,2BA6BS,gKACA,kBAAkB,CAAC,oBADnB,gCAEG,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,sBAA5C,CAFH,YAKD,KAAK,eAAL,EALC,qEASL,KAAK,eAAL,GATK,mDAUgB,kBAAkB,CAAC,oBAAnB,CACnB,KAAK,GADc,CAEnB,KAAK,OAFc,CAGnB,KAAK,IAHc,CAInB,KAAK,OAJc,CAVhB,SAUC,MAVD,iBAgBL,KAAK,kBAAL,GAhBK,kCAkBE,MAlBF,0EA7BT,wBAAgC,gCAAhC,EAmDA,UAAa,CAAA,iBAAb,kIACE,2BACU,GADV,CAEU,QAFV,CAK6B,eAFnB,CAAA,OAEmB,2DAFQ,EAER,IADnB,CAAA,QACmB,8CAAnB,CAAA,UAAmB,mFAE3B,0BANQ,OAAA,GAAA,CAAA,GAAA,CACA,OAAA,QAAA,CAAA,QAAA,CACA,OAAA,OAAA,CAAA,OAAA,CACA,OAAA,QAAA,CAAA,QAAA,CACA,OAAA,UAAA,CAAA,UAAA,CAAmB,cAG5B,CATH,mDAWE,cAAkB,CAChB,MAAO,MAAK,QAAZ,CACD,CAbH,4BAeY,uBAAY,CACpB,MAAO,mCAAP,CACD,CAjBH,2BAmBY,sBAAW,CACnB,MAAO,MAAK,QAAZ,CACD,CArBH,6BAuBE,yJACO,kBAAkB,CAAC,2BAD1B,gCAEU,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,6BAA5C,CAFV,YAKM,KAAK,eAAL,EALN,qEASE,KAAK,eAAL,GATF,mDAUe,kBAAkB,CAAC,2BAAnB,CACX,KAAK,GADM,CAEX,KAAK,QAFM,CAGX,KAAK,IAHM,CAIX,KAAK,OAJM,CAKX,KAAK,UALM,CAVf,mIAvBF,0BA0CE,mKACO,kBAAkB,CAAC,2BAD1B,gCAEU,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,6BAA5C,CAFV,YAKM,KAAK,eAAL,EALN,6DAMW,CACL,OAAO,CAAE,KAAK,QADT,CAEL,OAAO,CAAE,KAAK,OAFT,CAGL,GAAG,CAAE,KAAK,GAHL,CANX,4DAa4B,kBAAkB,CAAC,2BAAnB,CAA+C,KAAK,IAApD,CAb5B,SAaQ,WAbR,iBAcE,KAAK,kBAAL,GAdF,IAeM,WAfN,4BAgBI,KAAK,UAAL,CAAkB,WAAW,CAAC,UAA9B,CAhBJ,kCAiBW,KAAK,OAAL,EAjBX,eAmBU,IAAI,CAAA,KAAJ,CAAU,0CAAV,CAnBV,yEA1CF,2BAiEE,qJACO,kBAAkB,CAAC,2BAD1B,gCAEU,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,6BAA5C,CAFV,YAKM,KAAK,eAAL,EALN,qEASE,KAAK,eAAL,GATF,mDAUe,kBAAkB,CAAC,2BAAnB,CACX,KAAK,GADM,CAEX,KAAK,OAFM,CAGX,KAAK,IAHM,CAIX,KAAK,OAJM,CAKX,KAAK,UALM,CAVf,mIAjEF,uBAoFE,kBAAO,CACL,MAAO,CACL,GAAG,CAAE,KAAK,GADL,CAEL,OAAO,CAAE,KAAK,OAFT,CAGL,OAAO,CAAE,KAAK,OAHT,CAIL,UAAU,CAAE,KAAK,UAJZ,CAAP,CAMD,CA3FH,+BAAuC,gCAAvC,EA8FA,GAAM,CAAA,qBAAqB,CAAG,iBAA9B,CACA,GAAM,CAAA,sBAAsB,CAAG,kBAA/B,CACA,GAAM,CAAA,eAAe,CAAG,WAAxB,CACA,GAAM,CAAA,aAAa,CAAG,SAAtB,CACA,GAAM,CAAA,aAAa,CAAG,SAAtB,CAIA,MAAM,IAAW,CAAA,sBAAX,CAAN,CAAA,SAAiB,sBAAjB,CAAuC,CACrC,QAAgB,CAAA,wBAAhB,CAAyC,UAAzC,CAA2D,CACzD,sEAAuE,UAAvE,sBAAsG,UAAtG,CACD,CAFe,sBAAA,CAAA,wBAAA,CAAwB,wBAAxB,CAIT,QAAe,CAAA,gCAAf,wLACL,cADK,qDAC2B,IAD3B,IAGA,kBAAkB,CAAC,gCAHnB,gCAIG,IAAI,CAAA,mBAAJ,CACJ,kBADI,CAEJ,yDAFI,CAJH,2DAUQ,kBAAkB,CAAC,gCAAnB,CAAoD,cAApD,CAVR,mIAAe,sBAAA,CAAA,gCAAA,CAAgC,gCAAhC,CAaf,QAAe,CAAA,kBAAf,CAAkC,MAAlC,uIACA,kBAAkB,CAAC,qBADnB,gCAEG,IAAI,CAAA,mBAAJ,CACJ,kBADI,CAEJ,2CAFI,CAFH,2DAOQ,kBAAkB,CAAC,qBAAnB,CAAyC,MAAzC,CAAiD,EAAjD,CAPR,mIAAe,sBAAA,CAAA,kBAAA,CAAkB,kBAAlB,CAUf,QAAe,CAAA,kBAAf,CAAkC,SAAlC,CAAqD,OAArD,uIACA,kBAAkB,CAAC,qBADnB,gCAEG,IAAI,CAAA,mBAAJ,CACJ,kBADI,CAEJ,2CAFI,CAFH,2DAOQ,kBAAkB,CAAC,qBAAnB,CAAyC,SAAzC,CAAoD,OAApD,CAPR,mIAAe,sBAAA,CAAA,kBAAA,CAAkB,kBAAlB,CAUf,QAAe,CAAA,eAAf,CACL,SADK,CAEL,QAFK,CAGL,QAHK,oIAKA,kBAAkB,CAAC,kBALnB,gCAMG,IAAI,CAAA,mBAAJ,CAAwB,kBAAxB,CAA4C,wCAA5C,CANH,2DAQQ,kBAAkB,CAAC,kBAAnB,CAAsC,SAAtC,CAAiD,QAAjD,CAA2D,QAA3D,CARR,mIAAe,sBAAA,CAAA,eAAA,CAAe,eAAf,CAWT,sBAAA,CAAA,kBAAA,CAAqB,sBAArB,CACA,sBAAA,CAAA,iBAAA,CAAoB,qBAApB,CACA,sBAAA,CAAA,WAAA,CAAc,eAAd,CACA,sBAAA,CAAA,SAAA,CAAY,aAAZ,CACA,sBAAA,CAAA,SAAA,CAAY,aAAZ,CACd,CAtDD,EAAiB,sBAAsB,GAAtB,sBAAsB,CAAA,EAAA,CAAvC","sourcesContent":["import { EventEmitter, Subscription, UnavailabilityError } from 'expo-modules-core';\nimport { Platform } from 'react-native';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport ExponentFileSystem from './ExponentFileSystem';\nimport {\n  DownloadOptions,\n  DownloadPauseState,\n  DownloadProgressCallback,\n  FileSystemNetworkTaskProgressCallback,\n  DownloadProgressData,\n  UploadProgressData,\n  DownloadResult,\n  EncodingType,\n  FileInfo,\n  FileSystemAcceptedUploadHttpMethod,\n  FileSystemDownloadResult,\n  FileSystemRequestDirectoryPermissionsResult,\n  FileSystemSessionType,\n  FileSystemUploadOptions,\n  FileSystemUploadResult,\n  FileSystemUploadType,\n  ProgressEvent,\n  ReadingOptions,\n  WritingOptions,\n} from './FileSystem.types';\n\nif (!ExponentFileSystem) {\n  console.warn(\n    \"No native ExponentFileSystem module found, are you sure the expo-file-system's module is linked properly?\"\n  );\n}\n// Prevent webpack from pruning this.\nconst _unused = new EventEmitter(ExponentFileSystem); // eslint-disable-line\n\nexport {\n  DownloadOptions,\n  DownloadPauseState,\n  DownloadProgressCallback,\n  DownloadProgressData,\n  DownloadResult,\n  EncodingType,\n  FileInfo,\n  FileSystemDownloadResult,\n  FileSystemRequestDirectoryPermissionsResult,\n  FileSystemAcceptedUploadHttpMethod,\n  FileSystemSessionType,\n  FileSystemUploadOptions,\n  FileSystemUploadResult,\n  FileSystemUploadType,\n  FileSystemNetworkTaskProgressCallback,\n  ReadingOptions,\n  WritingOptions,\n};\n\nfunction normalizeEndingSlash(p: string | null): string | null {\n  if (p != null) {\n    return p.replace(/\\/*$/, '') + '/';\n  }\n  return null;\n}\n\nexport const documentDirectory = normalizeEndingSlash(ExponentFileSystem.documentDirectory);\nexport const cacheDirectory = normalizeEndingSlash(ExponentFileSystem.cacheDirectory);\n\nexport const { bundledAssets, bundleDirectory } = ExponentFileSystem;\n\nexport async function getInfoAsync(\n  fileUri: string,\n  options: { md5?: boolean; size?: boolean } = {}\n): Promise<FileInfo> {\n  if (!ExponentFileSystem.getInfoAsync) {\n    throw new UnavailabilityError('expo-file-system', 'getInfoAsync');\n  }\n  return await ExponentFileSystem.getInfoAsync(fileUri, options);\n}\n\nexport async function readAsStringAsync(\n  fileUri: string,\n  options?: ReadingOptions\n): Promise<string> {\n  if (!ExponentFileSystem.readAsStringAsync) {\n    throw new UnavailabilityError('expo-file-system', 'readAsStringAsync');\n  }\n  return await ExponentFileSystem.readAsStringAsync(fileUri, options || {});\n}\n\nexport async function getContentUriAsync(fileUri: string): Promise<string> {\n  if (Platform.OS === 'android') {\n    if (!ExponentFileSystem.getContentUriAsync) {\n      throw new UnavailabilityError('expo-file-system', 'getContentUriAsync');\n    }\n    return await ExponentFileSystem.getContentUriAsync(fileUri);\n  } else {\n    return new Promise(function (resolve, reject) {\n      resolve(fileUri);\n    });\n  }\n}\n\nexport async function writeAsStringAsync(\n  fileUri: string,\n  contents: string,\n  options: WritingOptions = {}\n): Promise<void> {\n  if (!ExponentFileSystem.writeAsStringAsync) {\n    throw new UnavailabilityError('expo-file-system', 'writeAsStringAsync');\n  }\n  return await ExponentFileSystem.writeAsStringAsync(fileUri, contents, options);\n}\n\nexport async function deleteAsync(\n  fileUri: string,\n  options: { idempotent?: boolean } = {}\n): Promise<void> {\n  if (!ExponentFileSystem.deleteAsync) {\n    throw new UnavailabilityError('expo-file-system', 'deleteAsync');\n  }\n  return await ExponentFileSystem.deleteAsync(fileUri, options);\n}\n\nexport async function deleteLegacyDocumentDirectoryAndroid(): Promise<void> {\n  if (Platform.OS !== 'android' || documentDirectory == null) {\n    return;\n  }\n  const legacyDocumentDirectory = `${documentDirectory}ExperienceData/`;\n  return await deleteAsync(legacyDocumentDirectory, { idempotent: true });\n}\n\nexport async function moveAsync(options: { from: string; to: string }): Promise<void> {\n  if (!ExponentFileSystem.moveAsync) {\n    throw new UnavailabilityError('expo-file-system', 'moveAsync');\n  }\n  return await ExponentFileSystem.moveAsync(options);\n}\n\nexport async function copyAsync(options: { from: string; to: string }): Promise<void> {\n  if (!ExponentFileSystem.copyAsync) {\n    throw new UnavailabilityError('expo-file-system', 'copyAsync');\n  }\n  return await ExponentFileSystem.copyAsync(options);\n}\n\nexport async function makeDirectoryAsync(\n  fileUri: string,\n  options: { intermediates?: boolean } = {}\n): Promise<void> {\n  if (!ExponentFileSystem.makeDirectoryAsync) {\n    throw new UnavailabilityError('expo-file-system', 'makeDirectoryAsync');\n  }\n  return await ExponentFileSystem.makeDirectoryAsync(fileUri, options);\n}\n\nexport async function readDirectoryAsync(fileUri: string): Promise<string[]> {\n  if (!ExponentFileSystem.readDirectoryAsync) {\n    throw new UnavailabilityError('expo-file-system', 'readDirectoryAsync');\n  }\n  return await ExponentFileSystem.readDirectoryAsync(fileUri, {});\n}\n\nexport async function getFreeDiskStorageAsync(): Promise<number> {\n  if (!ExponentFileSystem.getFreeDiskStorageAsync) {\n    throw new UnavailabilityError('expo-file-system', 'getFreeDiskStorageAsync');\n  }\n  return await ExponentFileSystem.getFreeDiskStorageAsync();\n}\n\nexport async function getTotalDiskCapacityAsync(): Promise<number> {\n  if (!ExponentFileSystem.getTotalDiskCapacityAsync) {\n    throw new UnavailabilityError('expo-file-system', 'getTotalDiskCapacityAsync');\n  }\n  return await ExponentFileSystem.getTotalDiskCapacityAsync();\n}\n\nexport async function downloadAsync(\n  uri: string,\n  fileUri: string,\n  options: DownloadOptions = {}\n): Promise<FileSystemDownloadResult> {\n  if (!ExponentFileSystem.downloadAsync) {\n    throw new UnavailabilityError('expo-file-system', 'downloadAsync');\n  }\n\n  return await ExponentFileSystem.downloadAsync(uri, fileUri, {\n    sessionType: FileSystemSessionType.BACKGROUND,\n    ...options,\n  });\n}\n\nexport async function uploadAsync(\n  url: string,\n  fileUri: string,\n  options: FileSystemUploadOptions = {}\n): Promise<FileSystemUploadResult> {\n  if (!ExponentFileSystem.uploadAsync) {\n    throw new UnavailabilityError('expo-file-system', 'uploadAsync');\n  }\n\n  return await ExponentFileSystem.uploadAsync(url, fileUri, {\n    sessionType: FileSystemSessionType.BACKGROUND,\n    uploadType: FileSystemUploadType.BINARY_CONTENT,\n    ...options,\n    httpMethod: (options.httpMethod || 'POST').toUpperCase(),\n  });\n}\n\nexport function createDownloadResumable(\n  uri: string,\n  fileUri: string,\n  options?: DownloadOptions,\n  callback?: FileSystemNetworkTaskProgressCallback<DownloadProgressData>,\n  resumeData?: string\n): DownloadResumable {\n  return new DownloadResumable(uri, fileUri, options, callback, resumeData);\n}\n\nexport function createUploadTask(\n  url: string,\n  fileUri: string,\n  options?: FileSystemUploadOptions,\n  callback?: FileSystemNetworkTaskProgressCallback<UploadProgressData>\n): UploadTask {\n  return new UploadTask(url, fileUri, options, callback);\n}\n\nexport abstract class FileSystemCancellableNetworkTask<\n  T extends DownloadProgressData | UploadProgressData\n> {\n  private _uuid = uuidv4();\n  protected taskWasCanceled = false;\n  private emitter = new EventEmitter(ExponentFileSystem);\n  private subscription?: Subscription | null;\n\n  public async cancelAsync(): Promise<void> {\n    if (!ExponentFileSystem.networkTaskCancelAsync) {\n      throw new UnavailabilityError('expo-file-system', 'networkTaskCancelAsync');\n    }\n\n    this.removeSubscription();\n    this.taskWasCanceled = true;\n    return await ExponentFileSystem.networkTaskCancelAsync(this.uuid);\n  }\n\n  protected isTaskCancelled(): boolean {\n    if (this.taskWasCanceled) {\n      console.warn('This task was already canceled.');\n      return true;\n    }\n\n    return false;\n  }\n\n  protected get uuid(): string {\n    return this._uuid;\n  }\n\n  protected abstract getEventName(): string;\n\n  protected abstract getCallback(): FileSystemNetworkTaskProgressCallback<T> | undefined;\n\n  protected addSubscription() {\n    if (this.subscription) {\n      return;\n    }\n\n    this.subscription = this.emitter.addListener(this.getEventName(), (event: ProgressEvent<T>) => {\n      if (event.uuid === this.uuid) {\n        const callback = this.getCallback();\n        if (callback) {\n          callback(event.data);\n        }\n      }\n    });\n  }\n\n  protected removeSubscription() {\n    if (!this.subscription) {\n      return;\n    }\n    this.emitter.removeSubscription(this.subscription);\n    this.subscription = null;\n  }\n}\n\nexport class UploadTask extends FileSystemCancellableNetworkTask<UploadProgressData> {\n  private options: FileSystemUploadOptions;\n\n  constructor(\n    private url: string,\n    private fileUri: string,\n    options?: FileSystemUploadOptions,\n    private callback?: FileSystemNetworkTaskProgressCallback<UploadProgressData>\n  ) {\n    super();\n\n    const httpMethod = (options?.httpMethod?.toUpperCase() ||\n      'POST') as FileSystemAcceptedUploadHttpMethod;\n\n    this.options = {\n      sessionType: FileSystemSessionType.BACKGROUND,\n      uploadType: FileSystemUploadType.BINARY_CONTENT,\n      ...options,\n      httpMethod,\n    };\n  }\n\n  protected getEventName(): string {\n    return 'expo-file-system.uploadProgress';\n  }\n  protected getCallback(): FileSystemNetworkTaskProgressCallback<UploadProgressData> | undefined {\n    return this.callback;\n  }\n\n  public async uploadAsync(): Promise<FileSystemUploadResult | undefined> {\n    if (!ExponentFileSystem.uploadTaskStartAsync) {\n      throw new UnavailabilityError('expo-file-system', 'uploadTaskStartAsync');\n    }\n\n    if (this.isTaskCancelled()) {\n      return;\n    }\n\n    this.addSubscription();\n    const result = await ExponentFileSystem.uploadTaskStartAsync(\n      this.url,\n      this.fileUri,\n      this.uuid,\n      this.options\n    );\n    this.removeSubscription();\n\n    return result;\n  }\n}\n\nexport class DownloadResumable extends FileSystemCancellableNetworkTask<DownloadProgressData> {\n  constructor(\n    private url: string,\n    private _fileUri: string,\n    private options: DownloadOptions = {},\n    private callback?: FileSystemNetworkTaskProgressCallback<DownloadProgressData>,\n    private resumeData?: string\n  ) {\n    super();\n  }\n\n  public get fileUri(): string {\n    return this._fileUri;\n  }\n\n  protected getEventName(): string {\n    return 'expo-file-system.downloadProgress';\n  }\n\n  protected getCallback(): FileSystemNetworkTaskProgressCallback<DownloadProgressData> | undefined {\n    return this.callback;\n  }\n\n  async downloadAsync(): Promise<FileSystemDownloadResult | undefined> {\n    if (!ExponentFileSystem.downloadResumableStartAsync) {\n      throw new UnavailabilityError('expo-file-system', 'downloadResumableStartAsync');\n    }\n\n    if (this.isTaskCancelled()) {\n      return;\n    }\n\n    this.addSubscription();\n    return await ExponentFileSystem.downloadResumableStartAsync(\n      this.url,\n      this._fileUri,\n      this.uuid,\n      this.options,\n      this.resumeData\n    );\n  }\n\n  async pauseAsync(): Promise<DownloadPauseState> {\n    if (!ExponentFileSystem.downloadResumablePauseAsync) {\n      throw new UnavailabilityError('expo-file-system', 'downloadResumablePauseAsync');\n    }\n\n    if (this.isTaskCancelled()) {\n      return {\n        fileUri: this._fileUri,\n        options: this.options,\n        url: this.url,\n      };\n    }\n\n    const pauseResult = await ExponentFileSystem.downloadResumablePauseAsync(this.uuid);\n    this.removeSubscription();\n    if (pauseResult) {\n      this.resumeData = pauseResult.resumeData;\n      return this.savable();\n    } else {\n      throw new Error('Unable to generate a savable pause state');\n    }\n  }\n\n  async resumeAsync(): Promise<FileSystemDownloadResult | undefined> {\n    if (!ExponentFileSystem.downloadResumableStartAsync) {\n      throw new UnavailabilityError('expo-file-system', 'downloadResumableStartAsync');\n    }\n\n    if (this.isTaskCancelled()) {\n      return;\n    }\n\n    this.addSubscription();\n    return await ExponentFileSystem.downloadResumableStartAsync(\n      this.url,\n      this.fileUri,\n      this.uuid,\n      this.options,\n      this.resumeData\n    );\n  }\n\n  savable(): DownloadPauseState {\n    return {\n      url: this.url,\n      fileUri: this.fileUri,\n      options: this.options,\n      resumeData: this.resumeData,\n    };\n  }\n}\n\nconst baseReadAsStringAsync = readAsStringAsync;\nconst baseWriteAsStringAsync = writeAsStringAsync;\nconst baseDeleteAsync = deleteAsync;\nconst baseMoveAsync = moveAsync;\nconst baseCopyAsync = copyAsync;\n/**\n * Android only\n */\nexport namespace StorageAccessFramework {\n  export function getUriForDirectoryInRoot(folderName: string) {\n    return `content://com.android.externalstorage.documents/tree/primary:${folderName}/document/primary:${folderName}`;\n  }\n\n  export async function requestDirectoryPermissionsAsync(\n    initialFileUrl: string | null = null\n  ): Promise<FileSystemRequestDirectoryPermissionsResult> {\n    if (!ExponentFileSystem.requestDirectoryPermissionsAsync) {\n      throw new UnavailabilityError(\n        'expo-file-system',\n        'StorageAccessFramework.requestDirectoryPermissionsAsync'\n      );\n    }\n\n    return await ExponentFileSystem.requestDirectoryPermissionsAsync(initialFileUrl);\n  }\n\n  export async function readDirectoryAsync(dirUri: string): Promise<string[]> {\n    if (!ExponentFileSystem.readSAFDirectoryAsync) {\n      throw new UnavailabilityError(\n        'expo-file-system',\n        'StorageAccessFramework.readDirectoryAsync'\n      );\n    }\n    return await ExponentFileSystem.readSAFDirectoryAsync(dirUri, {});\n  }\n\n  export async function makeDirectoryAsync(parentUri: string, dirName: string): Promise<string> {\n    if (!ExponentFileSystem.makeSAFDirectoryAsync) {\n      throw new UnavailabilityError(\n        'expo-file-system',\n        'StorageAccessFramework.makeDirectoryAsync'\n      );\n    }\n    return await ExponentFileSystem.makeSAFDirectoryAsync(parentUri, dirName);\n  }\n\n  export async function createFileAsync(\n    parentUri: string,\n    fileName: string,\n    mimeType: string\n  ): Promise<string> {\n    if (!ExponentFileSystem.createSAFFileAsync) {\n      throw new UnavailabilityError('expo-file-system', 'StorageAccessFramework.createFileAsync');\n    }\n    return await ExponentFileSystem.createSAFFileAsync(parentUri, fileName, mimeType);\n  }\n\n  export const writeAsStringAsync = baseWriteAsStringAsync;\n  export const readAsStringAsync = baseReadAsStringAsync;\n  export const deleteAsync = baseDeleteAsync;\n  export const moveAsync = baseMoveAsync;\n  export const copyAsync = baseCopyAsync;\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}